<table class="list">
  <tr>
    <td colspan="4" class="presets">
      <a href="list.rails?preset=my">All $entityNamePlural</a>&nbsp;
    </td>
    <td class="presets" style="text-align:right">
      $FormHelper.HiddenField("criteria.OrderBy")
      <input class="actionButton" type="button" value="Update" onClick="return search();" />
    </td>
  </tr>
  <tr class="filter">
    <td align="left">$FormHelper.TextField("criteria.Name", "%{style='width:200px'}")</td>
    <td align="left">
      $FormHelper.Select("criteria.CompanyId", $criteria.CompanyId, $companies, "%{value='Id', text='Name'}")
    </td>
    <td align="center">&nbsp;</td>
    <td align="center">&nbsp;</td>
    <td align="center">&nbsp;</td>
  </tr>

  #foreach($entity in $projects)
  #beforeall
    <tr class="header">
      <td>
        <a href="javascript:SortLink('Name');">Name</a>
      </td>
      <td>
        <a href="javascript:SortLink('Company');">Company</a>
      </td>
      <td>Stories</td>
      <td>Tasks</td>
      <td>&nbsp;</td>
    </tr>
  #before
    <tr
  #odd
    class="oddrow">
  #even
    class="evenrow">
  #each
    <td align="left">
      <a href="edit.rails?id=$entity.Id">$entity.Name</a>
    </td>
    <td align="left">
      $entity.Company.Name
    </td>
      <td align="center">
        $entity.Stories.Count
      </td>
      <td align="center">
        $entity.Tasks.Count
      </td>
    <td align="center">
      &nbsp;<a href="../stories/list.rails?projectId=$entity.Id">Stories</a> |
      <a href="../tasks/list.rails?projectId=$entity.Id">Tasks</a> |
      <a href="../iterations/list.rails?projectId=$entity.Id">Iterations</a>&nbsp;
    </td>
  #after
    </tr>
  #nodata
    <tr><td class="nodata_message" colspan="5">- no matching $entityNamePlural -</td></tr>
  #end
</table>

